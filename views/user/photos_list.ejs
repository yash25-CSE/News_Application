<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stunning Photo Gallery</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* Base styling for a clean page background and text color */
        body {
            /* Softer background color */
            background-color: #f0f4f8; /* Tailwind: bg-gray-100 */
            color: #1e293b; /* Tailwind: text-slate-800 */
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            min-height: 100vh;
        }

        /* Card Image Overlay for a subtle effect */
        .card-image-wrapper {
            position: relative;
            overflow: hidden;
            height: 12rem; /* h-48 equivalent */
        }
        .card-image-wrapper img {
            transition: transform 0.5s ease-in-out;
        }
        .card-image-wrapper:hover img {
            transform: scale(1.05);
        }
    </style>
</head>
<body>

    <div class="py-12 px-4">
        
        <div class="container mx-auto max-w-7xl">

            <header class="mb-10 flex flex-col md:flex-row justify-between items-start md:items-center">

                <a href="javascript:history.back()" class="btn btn-secondary btn-lg mb-4 md:mb-0 bg-white text-gray-700 hover:bg-gray-100 border-gray-300 shadow-md transition duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                    </svg>
                    Go Back
                </a>

                <h1 class="text-4xl font-extrabold tracking-tight text-gray-900 sm:text-5xl text-center md:text-left flex-grow">
                    <span class="text-indigo-600">Spectacular</span> Photo Gallery
                </h1>

                <div class="flex space-x-3 mt-4 md:mt-0">
                    <a href="/new" class="btn btn-success btn-lg bg-green-500 hover:bg-green-600 border-green-500 shadow-lg transition duration-300 transform hover:scale-105">
                         + New Post
                    </a>
                    <button class="btn btn-info btn-lg bg-blue-500 hover:bg-blue-600 border-blue-500 shadow-lg transition duration-300">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-1" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M5 4a1 1 0 00-2 0v2.793c-.78-.78-1.284-1.956-1.472-3.218-.088-.58-.352-1.096-.948-1.574-.596-.477-1.396-.69-2.228-.69h-.002zm15 13a1 1 0 00-2 0v-2.793c.78.78 1.284 1.956 1.472 3.218.088.58.352 1.096.948 1.574.596.477 1.396.69 2.228.69h.002zM10 2a8 8 0 100 16 8 8 0 000-16zM5 10a5 5 0 1110 0 5 5 0 01-10 0z" />
                        </svg>
                        Filter
                    </button>
                </div>

            </header>
            
            <div class="row flex flex-wrap -m-4">

                <% posts.forEach(post => { %>
                    <div class="col-md-4 mb-8 w-full sm:w-1/2 lg:w-1/3 p-4">
                        
                        <div class="card shadow-xl rounded-2xl overflow-hidden bg-white h-full flex flex-col transform transition duration-500 hover:shadow-3xl hover:translate-y-[-4px]">

                            <div class="card-image-wrapper">
                                <% if (post.imageFile) { %>
                                    <img src="<%= post.imageFile %>" class="card-img-top w-full h-full object-cover">
                                <% } else if (post.imageUrl) { %>
                                    <img src="<%= post.imageUrl %>" class="card-img-top w-full h-full object-cover">
                                <% } %>
                            </div>

                            <div class="card-body p-5 flex flex-col flex-grow">
                                <h5 class="text-2xl font-bold mb-3 text-indigo-700 truncate"><%= post.title %></h5>
                                
                                <a href="/photo/<%= post._id %>" class="btn btn-primary w-full mt-auto py-2 bg-indigo-600 hover:bg-indigo-700 border-indigo-600 shadow-lg focus:ring-4 focus:ring-indigo-500 focus:ring-opacity-50">
                                    See Details
                                </a>
                            </div>

                        </div>
                    </div>
                <% }); %>

            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>